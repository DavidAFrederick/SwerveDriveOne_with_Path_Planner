Notes on Code checkout and troubleshooting

Plans:
1) Test Vision Alignment - Re-test with correct wheel size
2) Investigate overuns - Greatly redued but still present
3) Investigate Stator Current Limits on Drive wheels to prevent slipping (See Tuner_Constants.py line 71)
4) Investigate the mounting orientation of the CTRE Pigeon on the robot 
5) Investigate our Pigeon2 initialization code.  (Default from CTRE)

Test Plan:
1) Test all of the minor movement functions first (Set them up in the robotcontainer file)
    As of 12/28/2025
    - turn_specific_heading.py = Mostly working, could use tuning to be more crisp
    - drive_specific_distance.py = ?? Still in use?? (May be obsoleted by drive_to_specific_point)
    - drive_to_specific_point.py = Errors

Fake PhotonVision Test Mode:
1) To test robot simulation driving using faked photonVision AprilTag Data, Enable test mode.
   See line ~105 in the robotcontainer file.
   This instantiates a DummyVision Subsystem and prevents errors from being logged


Suggestions:
1) Use the DriverStation Log Display tool to view robot logs
2) Add ">>>" to all diagnostic print statements to allow the Log Display tool to filter Events - DONE

Problems to Solve:
1) RobotPeriodic() taking too long (39mSec) causing WatchDog warnings  [SOLVED]
   Tried turning off Telemetry in RobotContainer Line 61
   >>> Look at line 301 in robot container  
   !!! This solved the problem but required a robot power cycle (Likely because the motors stored the configuration)


Enhancements:
1) When the robot is powered down, the wheels go into the X-position.  Makes difficult to move.
   Update to not place the robot into the X-Position
2) Consider having the robot default to Robot-Oriented driving vs Field Oriented driving
3) Determine how to get rid of the "Un-Licenced function" warnings on Motors. 
4) Need to Tune all of the PID controllers.  Review the Video to see how CTRE does it. 
5) Update the code to detect when the PhotonVision is not in 3D mode and print errors to the console

Items to check:
1) Review all PID control systems to make sure the tolerance is using the 
   same units as the calculate function (Degrees vs Radians)
2) Do we need to use the Robot Pose?
3) Can we configure Photonvision 3D mode in software. NO!  

Items to Document:
1) Need to document how to set the robot field position (Initial Robot Pose)
2) Document how to use the drive to position using the Data Class
3) Document how to enable no-vision test mode
4) Document how to configure drive to spot

   
Hardware Updates:
1) Mount the switch


What is working / almost working:
1) Path Planner with SmartDashboard picklist is working
2) Change heading is working.  Could use tuning.
3) Robot-Centric Driving is working (Reduced speed is in place at this time)


Lessons Learned:
1)  Looks like the power on the robot needs to be cycled to change some of the motor settings (Logging/Telemetry)



==================================================
Vision Alignment Mode Analysis

Control of Vision Test Mode:
1) Line 112 of RobotContainer.py.   (Selects which Vision System to instantiate (Real or Dummy))
2) Line  76 of apriltagAlignmentdata.  (Sets: self.apriltag_bestCameraToTarget and calculates YAW )

Differences:
1) In real world, the Robot to AprilTag is Negative as printed in calc dump and on PhotonVision
 ) In simulation, the Robot to AprilTag is Positive as printed in calc dump
Why? 

LOOKS LIKE A SIGN PROBLEM WITHIN drive_to_specific_point_with_lateral NEAR LINE 220
Also Looks like a sign problem with the Yaw coming from PhotonVision
 
==================================================

failure on 3, 9, 6, 12
These are the steering motors

Looks like Line 25 of the Tuner_contants.py is the problem.
"CLosed Loop" is a licensed feature.
.with_static_feedforward_sign(signals.StaticFeedforwardSignValue.USE_CLOSED_LOOP_SIGN)
>>>  Disableing line 25 did not remove the Licensing warning




============
files:
apriltagalignmentdata.py
robot.py
robotcontainer.py
telemetry.py

command_swerve_drivetrain.py
ledsubsystem.py
vision_subsystem_dummy.py
vision_subsystem.py

drive_forward_2_seconds.py
drive_in_square_command_group.py
drive_specific_distance.py
drive_to_apriltag_turnpoint_group.py
drive_to_specific_point_with_lateral.py
drive_to_specific_point.py
ledcommand.py
pause_command.py
print_robot_pose_position.py
reset_robot_pose_to_zero.py
turn_specific_heading.py
vision_alignment_mode.py
vision_alignment_with_offset.py

========================

Current Limits:

CTRE Phoenix 6 file "config_groups.py" Line 1063.  
(Accessed by jumping to definition of Slot0Configs() within the "tuner_constants.py" that instantiates the swerveDrive)
    def with_stator_current_limit(self, new_stator_current_limit: ampere) -> 'CurrentLimitsConfigs':

    def with_duty_cycle_open_loop_ramp_period(self, new_duty_cycle_open_loop_ramp_period: second) -> 'OpenLoopRampsConfigs':
